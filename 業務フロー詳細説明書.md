# 食品成分データベースシステム 業務フロー詳細説明書

## 概要
本システムは、文部科学省の日本食品標準成分表を基にした食品成分データベースを管理し、ユーザーが献立作成や食材発注を行うためのシステムです。

## 1. 食品成分データベースの更新

### 1.1 データ取得プロセス
**担当者**: 管理者
**頻度**: 必要に応じて（改定時、定期更新時）

**手順**:
1. 文部科学省の公式サイトから日本食品標準成分表2015年版（七訂）のExcelデータをダウンロード
2. ダウンロードしたデータの形式と内容を確認
3. データベース投入用の変換処理を実行
4. 既存データとの整合性チェック
5. データベースへの一括投入

**注意事項**:
- データ取得前にバックアップを取得
- 投入前にテスト環境での動作確認
- 投入後のデータ検証を実施

### 1.2 ユーザーからのフィードバック対応
**担当者**: 管理者
**頻度**: 随時

**手順**:
1. ユーザーからの連絡を受信
2. 報告された内容の詳細確認
3. データベース内での該当データの検証
4. 文部科学省の公式データとの照合
5. 必要に応じてデータベース修正
6. ユーザーへの結果報告

**対応基準**:
- 明らかな誤記・脱字の修正
- 成分値の大幅な乖離の修正
- 新規食材の追加（公式データに基づく）

### 1.3 定期更新プロセス
**担当者**: 管理者
**頻度**: 年1回（文部科学省の改定に合わせて）

**手順**:
1. 文部科学省からの改定通知の確認
2. 新規Excelデータの取得
3. 変更点の詳細分析
4. データベース更新計画の策定
5. 段階的なデータ更新の実施
6. 更新後の動作確認

## 2. 献立の作成

### 2.1 料理作成プロセス
**担当者**: ユーザー
**頻度**: 随時

**手順**:
1. 新規料理の作成画面にアクセス
2. 料理名の入力
3. 必要な食材の選択（データベースから検索）
4. 各食材の使用量と単位の設定
5. レシピの詳細入力（任意）
6. 料理の保存

**機能**:
- 食材の検索機能（名前、分類、成分値での検索）
- 使用量の自動計算機能
- カロリー等の栄養成分の自動算出

### 2.2 献立作成プロセス
**担当者**: ユーザー
**頻度**: 随時

**手順**:
1. 新規献立の作成画面にアクセス
2. 献立名の入力
3. 作成済み料理の選択（複数可）
4. 料理の順序設定
5. 献立の保存

**機能**:
- 料理の検索・選択機能
- 献立全体の栄養成分の集計表示
- 献立の複製・編集機能

### 2.3 履歴管理プロセス
**担当者**: ユーザー
**頻度**: 随時

**手順**:
1. 作成済み料理・献立の履歴表示
2. 必要な料理・献立の選択
3. 内容の確認・編集
4. 新規料理・献立として保存

**機能**:
- 日付・名前での検索機能
- お気に入り登録機能
- 共有機能（他のユーザーとの共有）

## 3. 食材の発注

### 3.1 発注計画作成プロセス
**担当者**: ユーザー
**頻度**: 随時

**手順**:
1. 発注対象の献立の選択
2. 作成人数の入力
3. 必要食材数の自動計算
4. 発注先の選択または新規作成
5. 発注内容の確認

**計算ロジック**:
- 基本使用量 × 作成人数 = 必要量
- 食材の最小単位での切り上げ処理
- 在庫考慮（設定可能）

### 3.2 発注先管理プロセス
**担当者**: ユーザー・管理者
**頻度**: 随時

**手順**:
1. 新規発注先の登録
   - 発注先名の入力
   - 連絡先情報の入力
   - 取扱食材の設定
2. 既存発注先の編集
3. 発注先の削除（履歴がある場合は無効化）

**管理項目**:
- 発注先基本情報
- 取扱食材リスト
- 価格情報
- 配送条件

### 3.3 発注書作成プロセス
**担当者**: ユーザー
**頻度**: 随時

**手順**:
1. 発注内容の最終確認
2. 発注書テンプレートの選択
3. 発注書の自動生成
4. 内容の確認・編集
5. 印刷またはPDF出力

**発注書項目**:
- 発注日時
- 発注先情報
- 食材リスト（品名、数量、単価、合計）
- 配送希望日
- 備考欄

## 4. システム管理

### 4.1 ユーザー管理
**担当者**: 管理者
**頻度**: 随時

**管理項目**:
- ユーザーアカウントの作成・削除
- 権限の設定・変更
- アクセスログの監視
- パスワードリセット対応

### 4.2 データベース管理
**担当者**: 管理者
**頻度**: 定期・随時

**管理項目**:
- データベースのバックアップ
- パフォーマンス監視
- データ整合性チェック
- 容量管理

### 4.3 システム監視
**担当者**: 管理者
**頻度**: 常時

**監視項目**:
- システム稼働状況
- レスポンス時間
- エラー発生状況
- セキュリティ脅威

## 5. セキュリティ対策

### 5.1 アクセス制御
- ユーザー認証（ID・パスワード）
- セッション管理
- 権限ベースのアクセス制御

### 5.2 データ保護
- 個人情報の暗号化
- 通信の暗号化（HTTPS）
- ログファイルの保護

### 5.3 監査ログ
- ユーザーアクションの記録
- データ変更履歴の保持
- セキュリティイベントの記録

## 6. 運用・保守

### 6.1 定期メンテナンス
**頻度**: 月1回
**内容**:
- データベースの最適化
- ログファイルの整理
- セキュリティアップデート

### 6.2 障害対応
**対応手順**:
1. 障害の検知・報告
2. 影響範囲の特定
3. 一時的な回避策の実施
4. 根本原因の特定・修正
5. 復旧作業の実施
6. 再発防止策の検討

### 6.3 パフォーマンス監視
**監視項目**:
- レスポンス時間
- 同時接続数
- データベース負荷
- ディスク使用量

## 7. 品質管理

### 7.1 データ品質管理
- 入力データの検証
- データ整合性チェック
- 定期的なデータ監査

### 7.2 システム品質管理
- 機能テストの実施
- 負荷テストの実施
- セキュリティテストの実施

### 7.3 ユーザー満足度管理
- ユーザーフィードバックの収集
- 改善要望の分析
- 機能追加・改善の検討 