# 食品成分データベースシステム システム要件書

## 1. システム概要

### 1.1 システム名
食品成分データベースシステム

### 1.2 システム目的
- 文部科学省の日本食品標準成分表を基にした食品成分データベースの管理
- ユーザーによる献立作成支援
- 食材発注機能の提供
- 栄養成分の計算・管理

### 1.3 対象ユーザー
- **一般ユーザー**: 献立作成、食材発注を行う個人・団体
- **管理者**: システム管理、データベース更新を行う担当者

## 2. 機能要件

### 2.1 食品成分データベース管理機能

#### 2.1.1 データ取得機能
**要件**:
- 文部科学省の公式サイトからのExcelデータダウンロード
- ダウンロードしたデータの形式変換
- データベースへの一括投入

**詳細仕様**:
- 対応ファイル形式: Excel (.xlsx, .xls)
- データ変換処理: CSV形式への変換
- エラーハンドリング: データ形式エラーの検出・報告

#### 2.1.2 データ検索機能
**要件**:
- 食材名での検索
- 分類での検索
- 成分値での検索
- 複数条件での絞り込み検索

**詳細仕様**:
- 検索対象: 食材名、分類、カロリー、タンパク質、脂質、炭水化物
- 検索方式: 部分一致、完全一致、範囲検索
- 検索結果: 最大100件まで表示

#### 2.1.3 データ修正機能
**要件**:
- 管理者によるデータ修正
- 修正履歴の記録
- 修正前データのバックアップ

### 2.2 献立作成機能

#### 2.2.1 料理作成機能
**要件**:
- 新規料理の作成
- 食材の選択・追加
- 使用量の設定
- 栄養成分の自動計算

**詳細仕様**:
- 料理名: 最大100文字
- 食材数: 最大50種類
- 使用量: 小数点以下2桁まで
- 栄養成分: カロリー、タンパク質、脂質、炭水化物を自動計算

#### 2.2.2 献立作成機能
**要件**:
- 複数料理の組み合わせ
- 献立全体の栄養成分集計
- 献立の保存・編集

**詳細仕様**:
- 献立名: 最大100文字
- 料理数: 最大20品
- 栄養成分: 各料理の合計を自動計算

#### 2.2.3 履歴管理機能
**要件**:
- 作成済み料理・献立の履歴表示
- 履歴からの複製・編集
- お気に入り登録

### 2.3 食材発注機能

#### 2.3.1 発注計画作成機能
**要件**:
- 献立からの発注計画作成
- 人数入力による必要量計算
- 発注先の選択

**詳細仕様**:
- 人数: 1-100人まで
- 必要量計算: 基本使用量 × 人数
- 最小単位での切り上げ処理

#### 2.3.2 発注先管理機能
**要件**:
- 発注先の登録・編集・削除
- 発注先情報の管理
- 取扱食材の設定

**詳細仕様**:
- 発注先名: 最大100文字
- 連絡先情報: 住所、電話番号、メールアドレス
- 取扱食材: 最大1000種類

#### 2.3.3 発注書作成機能
**要件**:
- 発注書の自動生成
- 印刷・PDF出力
- テンプレート選択

**詳細仕様**:
- 発注書形式: A4サイズ
- 出力形式: PDF、印刷
- テンプレート: 3種類

### 2.4 ユーザー管理機能

#### 2.4.1 認証機能
**要件**:
- ユーザーID・パスワード認証
- セッション管理
- パスワードリセット

#### 2.4.2 権限管理機能
**要件**:
- ユーザー権限の設定
- 機能別アクセス制御
- 管理者権限の付与

## 3. 非機能要件

### 3.1 性能要件

#### 3.1.1 レスポンス時間
- 画面表示: 3秒以内
- 検索処理: 5秒以内
- データ登録: 10秒以内

#### 3.1.2 同時接続数
- 最大100ユーザー同時接続
- 管理者: 最大10ユーザー同時接続

#### 3.1.3 データ容量
- 食材データ: 約10,000件
- 料理履歴: 最大100,000件
- 献立履歴: 最大50,000件

### 3.2 可用性要件

#### 3.2.1 稼働率
- 年間99.5%以上
- 計画メンテナンス: 月1回、2時間以内

#### 3.2.2 障害復旧時間
- システム障害: 4時間以内
- データ復旧: 8時間以内

### 3.3 セキュリティ要件

#### 3.3.1 認証・認可
- ユーザー認証: ID・パスワード
- セッション管理: 30分間無操作で自動ログアウト
- 権限ベースアクセス制御

#### 3.3.2 データ保護
- 通信暗号化: HTTPS
- 個人情報暗号化: AES-256
- ログファイル保護

#### 3.3.3 監査ログ
- ユーザーアクション記録
- データ変更履歴
- セキュリティイベント記録

### 3.4 保守性要件

#### 3.4.1 ログ機能
- アクセスログ
- エラーログ
- パフォーマンスログ

#### 3.4.2 バックアップ
- データベース: 日次バックアップ
- ログファイル: 週次バックアップ
- 設定ファイル: 月次バックアップ

## 4. 技術要件

### 4.1 開発環境

#### 4.1.1 プログラミング言語
- フロントエンド: HTML5, CSS3, JavaScript
- バックエンド: Python 3.8以上
- データベース: PostgreSQL 12以上

#### 4.1.2 フレームワーク
- Webフレームワーク: Django 3.2以上
- フロントエンド: React.js 17以上
- API: Django REST Framework

#### 4.1.3 開発ツール
- バージョン管理: Git
- ビルドツール: Webpack
- テストフレームワーク: pytest

### 4.2 運用環境

#### 4.2.1 サーバー要件
- OS: Ubuntu 20.04 LTS
- CPU: 4コア以上
- メモリ: 8GB以上
- ストレージ: 100GB以上

#### 4.2.2 ネットワーク要件
- 帯域幅: 100Mbps以上
- SSL証明書: 必須
- ファイアウォール: 必須

#### 4.2.3 データベース要件
- PostgreSQL 12以上
- 文字エンコーディング: UTF-8
- 接続プール: 最大50接続

## 5. インターフェース要件

### 5.1 ユーザーインターフェース

#### 5.1.1 Webブラウザ対応
- Chrome 90以上
- Firefox 88以上
- Safari 14以上
- Edge 90以上

#### 5.1.2 レスポンシブデザイン
- PC: 1920×1080以上
- タブレット: 768×1024以上
- スマートフォン: 375×667以上

#### 5.1.3 アクセシビリティ
- WCAG 2.1 AA準拠
- キーボード操作対応
- スクリーンリーダー対応

### 5.2 外部インターフェース

#### 5.2.1 文部科学省データ取得
- プロトコル: HTTPS
- データ形式: Excel
- 認証: 不要

#### 5.2.2 印刷機能
- 印刷形式: A4
- 出力形式: PDF
- フォント: 日本語対応

## 6. 制約事項

### 6.1 法的制約
- 個人情報保護法準拠
- 食品表示法準拠
- 著作権法準拠

### 6.2 技術的制約
- オープンソースソフトウェアの使用
- 標準的なWeb技術の使用
- データベースの正規化

### 6.3 運用制約
- 24時間365日稼働
- 定期メンテナンス時間: 月1回、2時間以内
- データ更新: 年1回（文部科学省の改定に合わせて）

## 7. 移行要件

### 7.1 データ移行
- 既存データの移行計画
- データ変換処理
- 移行後の検証

### 7.2 ユーザー移行
- ユーザーアカウントの移行
- パスワードの再設定
- 権限の再設定

### 7.3 運用移行
- システム切り替え計画
- 並行運用期間の設定
- 切り替え後の動作確認

## 8. テスト要件

### 8.1 単体テスト
- 各機能の単体テスト
- テストカバレッジ: 80%以上
- 自動テストの実行

### 8.2 結合テスト
- 機能間の連携テスト
- データベース連携テスト
- API連携テスト

### 8.3 システムテスト
- 全体システムの動作テスト
- 性能テスト
- セキュリティテスト

### 8.4 受け入れテスト
- ユーザー要件の確認
- 運用要件の確認
- 非機能要件の確認 